{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const API_KEY = '44002741-2ff50451c0a1667e01f2d5f97';\nexport const API_URL = 'https://pixabay.com/api/';\n\n\n// функція повертає відповідь з бекенду у джейсоні або помилку\nexport function fetchImages(query) { \n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const url = `${API_URL}?${params.toString()}`;\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nexport function createImageElements(images) {\n  return images.map(image => {\n    // Використовуємо data.hits для доступу до зображень\n    const li = document.createElement('li');\n    li.classList.add('gallery-item');\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = image.largeImageURL; // Використовуйте правильний URL для посилання\n    const img = document.createElement('img');\n    img.classList.add('gallery-image');\n    img.src = image.webformatURL;\n    img.dataset.source = image.largeImageURL;\n    img.alt = image.tags;\n\n    const caption = document.createElement('ul');\n    caption.classList.add('image-caption');\n    const captionItem1 = document.createElement('li');\n    captionItem1.classList.add('caption-item');\n    const captionItemLikes = document.createElement('p');\n    captionItemLikes.textContent = `Likes: \\n${image.likes}`;\n\n    const captionItem2 = document.createElement('li');\n    captionItem2.classList.add('caption-item');\n    const captionItemViewses = document.createElement('p');\n    captionItemViewses.textContent = `Views: \\n${image.views}`;\n\n    const captionItem3 = document.createElement('li');\n    captionItem3.classList.add('caption-item');\n    const captionItemComments = document.createElement('p');\n    captionItemComments.textContent = `Comments: \\n${image.comments}`;\n\n    const captionItem4 = document.createElement('li');\n    captionItem4.classList.add('caption-item');\n    const captionItemDownloads = document.createElement('p');\n    captionItemDownloads.textContent = `Downloads: \\n${image.downloads}`;\n\n    link.append(img);\n    captionItem1.append(captionItemLikes);\n    captionItem2.append(captionItemViewses);\n    captionItem3.append(captionItemComments);\n    captionItem4.append(captionItemDownloads);\n    caption.append(captionItem1, captionItem2, captionItem3, captionItem4);\n    li.append(link);\n    li.append(caption);\n\n    return li;\n  });\n}\n\nexport function updateGallery(gallery, elements) {\n  gallery.innerHTML = '';\n  gallery.append(...elements);\n}\n\nexport function initializeLightbox() {\n  return new SimpleLightbox('.gallery a', {\n    captions: true, // Увімкнути підписи\n    captionSelector: 'img', // Селектор для елемента, з якого брати підпис\n    captionType: 'attr', // Тип отримання підпису: 'attr', 'data' або 'text'\n    captionsData: 'alt', // Атрибут або data-атрибут, який використовується для отримання підпису\n    captionPosition: 'bottom', // Позиція підпису: 'top' або 'bottom'\n    captionDelay: 250, // Затримка перед показом підпису\n  });\n}\n\nexport function showErrorToast(message) {\n  iziToast.show({\n    class: 'promise-message',\n    iconUrl: '/goit-js-hw-11/cancel-circle.svg',\n    iconColor: 'whte',\n    message: message,\n    messageColor: 'white',\n    messageSize: '18',\n    backgroundColor: 'red',\n    position: 'topRight',\n    class: 'custom-toast',\n    icon: 'iziToast-icon',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  createImageElements,\n  updateGallery,\n  initializeLightbox,\n  showErrorToast,\n} from './js/render-functions';\n\n//querySelectors\nconst searchForm = document.querySelector('.search-form');\nconst searchField = document.querySelector('#input-search');\nconst gallery = document.querySelector('ul.gallery');\n\n//loader is created\nconst loader = document.createElement('div');\nloader.classList.add('loader');\nloader.style.display = 'none';\ndocument.body.appendChild(loader);\n\n\n//SEARCH FORM\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = searchField.value.trim();\n  if (query !== '') {\n    loader.style.display = 'block';\n\n    fetchImages(query) // прихід з бекенду у джейсоні\n      .then(data => {\n        if (data.totalHits >= 1) {\n          const elements = createImageElements(data.hits);\n          updateGallery(gallery, elements);\n          let lightbox = initializeLightbox();\n          lightbox.refresh();\n        } else {\n          showErrorToast(\n            'Sorry, there are no images matching your search query. Please try again!'\n          );\n        }\n      })\n      .catch(error => {\n        showErrorToast(\n          'An error occurred while fetching the images. Please try again!'\n        );\n        console.log(error);\n      })\n      .finally(() => {\n        loader.style.display = 'none';\n        searchForm.reset(); // Скидання всієї форми\n      });\n  }\n});\n"],"names":["API_KEY","API_URL","fetchImages","query","params","url","response","createImageElements","images","image","li","link","img","caption","captionItem1","captionItemLikes","captionItem2","captionItemViewses","captionItem3","captionItemComments","captionItem4","captionItemDownloads","updateGallery","gallery","elements","initializeLightbox","SimpleLightbox","showErrorToast","message","iziToast","searchForm","searchField","loader","event","data","error"],"mappings":"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"}