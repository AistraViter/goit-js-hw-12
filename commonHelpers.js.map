{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44002741-2ff50451c0a1667e01f2d5f97';\nexport const perPage = 15;\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\n\nexport async function fetchImages(query, page) {\n  const response = await axios.get(\"/\", {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page,\n      per_page: perPage,\n    },\n  });\n  const data = response.data;\n  return data;\n}\n\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nexport function createImageElements(images) {\n  return images.map(image => {\n    // Використовуємо data.hits для доступу до зображень\n    const li = document.createElement('li');\n    li.classList.add('gallery-item');\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = image.largeImageURL; // Використовуйте правильний URL для посилання\n    const img = document.createElement('img');\n    img.classList.add('gallery-image');\n    img.src = image.webformatURL;\n    img.dataset.source = image.largeImageURL;\n    img.alt = image.tags;\n\n    const caption = document.createElement('ul');\n    caption.classList.add('image-caption');\n    const captionItem1 = document.createElement('li');\n    captionItem1.classList.add('caption-item');\n    const captionItemLikes = document.createElement('p');\n    captionItemLikes.textContent = `Likes: \\n${image.likes}`;\n\n    const captionItem2 = document.createElement('li');\n    captionItem2.classList.add('caption-item');\n    const captionItemViewses = document.createElement('p');\n    captionItemViewses.textContent = `Views: \\n${image.views}`;\n\n    const captionItem3 = document.createElement('li');\n    captionItem3.classList.add('caption-item');\n    const captionItemComments = document.createElement('p');\n    captionItemComments.textContent = `Comments: \\n${image.comments}`;\n\n    const captionItem4 = document.createElement('li');\n    captionItem4.classList.add('caption-item');\n    const captionItemDownloads = document.createElement('p');\n    captionItemDownloads.textContent = `Downloads: \\n${image.downloads}`;\n\n    link.append(img);\n    captionItem1.append(captionItemLikes);\n    captionItem2.append(captionItemViewses);\n    captionItem3.append(captionItemComments);\n    captionItem4.append(captionItemDownloads);\n    caption.append(captionItem1, captionItem2, captionItem3, captionItem4);\n    li.append(link);\n    li.append(caption);\n\n    return li;\n  });\n}\n\nexport function updateGallery(gallery, elements) {\n  gallery.innerHTML = '';\n  gallery.append(...elements);\n}\n\nexport function initializeLightbox() {\n  return new SimpleLightbox('.gallery a', {\n    captions: true, // Увімкнути підписи\n    captionSelector: 'img', // Селектор для елемента, з якого брати підпис\n    captionType: 'attr', // Тип отримання підпису: 'attr', 'data' або 'text'\n    captionsData: 'alt', // Атрибут або data-атрибут, який використовується для отримання підпису\n    captionPosition: 'bottom', // Позиція підпису: 'top' або 'bottom'\n    captionDelay: 250, // Затримка перед показом підпису\n  });\n}\n\nexport function showErrorToast(message) {\n  iziToast.show({\n    class: 'promise-message',\n    iconUrl: '/goit-js-hw-12/cancel-circle.svg',\n    iconColor: 'whte',\n    message: message,\n    messageColor: 'white',\n    messageSize: '18',\n    backgroundColor: 'red',\n    position: 'topRight',\n    class: 'custom-toast',\n    icon: 'iziToast-icon',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { perPage } from './js/pixabay-api';\n\nimport {\n  createImageElements,\n  updateGallery,\n  initializeLightbox,\n  showErrorToast,\n} from './js/render-functions';\n\n//querySelectors\nconst searchForm = document.querySelector('.search-form');\nconst searchField = document.querySelector('#input-search');\nconst gallery = document.querySelector('ul.gallery');\nconst loadMoreBtn = document.querySelector('#btn-load-more');\n\nlet page;\nlet query;\nlet hitsToShow;\n\n//loader is created\nconst loader = document.createElement('div');\nloader.classList.add('loader');\nloader.style.display = 'none';\ndocument.body.appendChild(loader);\n\n//SEARCH FORM\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  query = searchField.value.trim();\n\n  if (query !== '') {\n    loader.style.display = 'block';\n    page = 1;\n    fetchImages(query, page)\n      .then(data => {\n        hitsToShow = data.totalHits;\n        if (hitsToShow >= 1) {\n          const elements = createImageElements(data.hits);\n          console.log(elements.length);\n          updateGallery(gallery, elements);\n          let lightbox = initializeLightbox();\n          lightbox.refresh();\n          loadMoreBtn.style.display = 'block';\n        } else {\n          showErrorToast(\n            'Sorry, there are no images matching your search query. Please try again!'\n          );\n        }\n      })\n      .catch(error => {\n        showErrorToast(\n          'An error occurred while fetching the images. Please try again!'\n        );\n        console.log(error);\n      })\n      .finally(() => {\n        loader.style.display = 'none';\n        searchForm.reset();\n      });\n  }\n});\n\n//LOAD MORE\nloadMoreBtn.addEventListener('click', event => {\n  event.preventDefault();\n\n  loader.style.display = 'block';\n  page++;\n  fetchImages(query, page)\n    .then(data => {\n      hitsToShow = data.totalHits - (page - 1) * perPage;\n\n      if (hitsToShow >= 1) {\n        const elements = createImageElements(data.hits);\n        gallery.append(...elements);\n        let lightbox = initializeLightbox();\n        lightbox.refresh();\n        loadMoreBtn.style.display = 'block';\n      } else {\n        showErrorToast(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n    })\n    .catch(error => {\n      showErrorToast(\n        'An error occurred while fetching the images. Please try again!'\n      );\n      console.log(error);\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n      searchForm.reset();\n    });\n});\n"],"names":["API_KEY","perPage","axios","fetchImages","query","page","createImageElements","images","image","li","link","img","caption","captionItem1","captionItemLikes","captionItem2","captionItemViewses","captionItem3","captionItemComments","captionItem4","captionItemDownloads","updateGallery","gallery","elements","initializeLightbox","SimpleLightbox","showErrorToast","message","iziToast","searchForm","searchField","loadMoreBtn","hitsToShow","loader","event","data","error"],"mappings":"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"}