import{a as I,S as T,i as B}from"./assets/vendor-b11e2a50.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();const R="44002741-2ff50451c0a1667e01f2d5f97",u=15;I.defaults.baseURL="https://pixabay.com/api/";async function x(n,e){return(await I.get("/",{params:{key:R,q:n,image_type:"photo",orientation:"horizontal",safesearch:"true",page:e,per_page:u}})).data}function S(n){return n.map(e=>{const a=document.createElement("li");a.classList.add("gallery-item");const r=document.createElement("a");r.classList.add("gallery-link"),r.href=e.largeImageURL;const t=document.createElement("img");t.classList.add("gallery-image"),t.src=e.webformatURL,t.dataset.source=e.largeImageURL,t.alt=e.tags;const o=document.createElement("ul");o.classList.add("image-caption");const c=document.createElement("li");c.classList.add("caption-item");const b=document.createElement("p");b.textContent=`Likes: 
${e.likes}`;const f=document.createElement("li");f.classList.add("caption-item");const w=document.createElement("p");w.textContent=`Views: 
${e.views}`;const g=document.createElement("li");g.classList.add("caption-item");const E=document.createElement("p");E.textContent=`Comments: 
${e.comments}`;const y=document.createElement("li");y.classList.add("caption-item");const v=document.createElement("p");return v.textContent=`Downloads: 
${e.downloads}`,r.append(t),c.append(b),f.append(w),g.append(E),y.append(v),o.append(c,f,g,y),a.append(r),a.append(o),a})}function k(n,e){n.innerHTML="",n.append(...e)}function C(){return new T(".gallery a",{captions:!0,captionSelector:"img",captionType:"attr",captionsData:"alt",captionPosition:"bottom",captionDelay:250})}function i(n,e){B.show({class:"promise-message",iconUrl:"/goit-js-hw-12/cancel-circle.svg",iconColor:"whte",message:n,messageColor:"white",messageSize:"18",backgroundColor:e,position:"topRight",class:"custom-toast",icon:"iziToast-icon"})}const h=document.querySelector(".search-form"),D=document.querySelector("#input-search"),q=document.querySelector("ul.gallery"),m=document.querySelector("#btn-load-more"),M=document.querySelector(".load-more-container");let d,p,l;const s=document.createElement("div");s.classList.add("loader");const L=document.createElement("p");L.classList.add("loader-text");L.textContent="Loads images, please wait";s.append(L);function O(){s.classList.add("loader-below-form"),h.append(s),s.style.display="block"}function z(){s.classList.add("loader-below-loadMoreBtn"),M.append(s),s.style.display="block"}function P(){s.style.display="none",s.classList.remove("loader-below-form"),s.classList.remove("loader-below-loadMoreBtn"),s.remove()}h.addEventListener("submit",n=>{n.preventDefault(),p=D.value.trim(),p!==""&&(O(),d=1,x(p,d).then(e=>{if(l=e.totalHits,l>=1){const a=S(e.hits);k(q,a),C().refresh();const t=document.querySelector(".gallery-item");if(t){const c=t.getBoundingClientRect().height*2;window.scrollBy({top:c,left:0,behavior:"smooth"})}console.log(t.getBoundingClientRect()),l-u>=1?m.style.display="block":i("We're sorry, but you've reached the end of search results.","blue")}else i("Sorry, there are no images matching your search query. Please try again!","red")}).catch(e=>{i("An error occurred while fetching the images. Please try again!","red"),console.log(e)}).finally(()=>{setTimeout(()=>{P(),h.reset()},2e3)}))});m.addEventListener("click",n=>{n.preventDefault(),z(),d++,x(p,d).then(e=>{if(l=e.totalHits-(d-1)*u,m.style.display="none",l>=1){const a=S(e.hits);q.append(...a),C().refresh();const t=document.querySelector(".gallery-item");t&&(t.getBoundingClientRect().height*2,window.scrollBy({top:500,left:0,behavior:"smooth"})),l-u>=1?setTimeout(()=>{m.style.display="block"},2e3):i("We're sorry, but you've reached the end of search results.","blue")}}).catch(e=>{i("An error occurred while fetching the images. Please try again!","red"),console.log(e)}).finally(()=>{setTimeout(()=>{P(),h.reset()},5e3)})});
//# sourceMappingURL=commonHelpers.js.map
