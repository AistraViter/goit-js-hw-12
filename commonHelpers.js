import{a as E,S as R,i as P}from"./assets/vendor-b11e2a50.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();const T="44002741-2ff50451c0a1667e01f2d5f97",u=15;E.defaults.baseURL="https://pixabay.com/api/";async function S(o,e){return(await E.get("/",{params:{key:T,q:o,image_type:"photo",orientation:"horizontal",safesearch:"true",page:e,per_page:u}})).data}function I(o){const e=document.createElement("p");return e.classList.add("loader"),e.textContent="Loading images, please wait",e.style.display="block",o.append(e)}function v(){const o=document.querySelector(".loader");return setTimeout(()=>{o.style.display="none",o.remove()},2e3)}function q(o){return o.map(e=>{const r=document.createElement("li");r.classList.add("gallery-item");const s=document.createElement("a");s.classList.add("gallery-link"),s.href=e.largeImageURL;const t=document.createElement("img");t.classList.add("gallery-image"),t.src=e.webformatURL,t.dataset.source=e.largeImageURL,t.alt=e.tags;const n=document.createElement("ul");n.classList.add("image-caption");const a=document.createElement("li");a.classList.add("caption-item");const y=document.createElement("p");y.textContent=`Likes: 
${e.likes}`;const p=document.createElement("li");p.classList.add("caption-item");const b=document.createElement("p");b.textContent=`Views: 
${e.views}`;const h=document.createElement("li");h.classList.add("caption-item");const L=document.createElement("p");L.textContent=`Comments: 
${e.comments}`;const g=document.createElement("li");g.classList.add("caption-item");const w=document.createElement("p");return w.textContent=`Downloads: 
${e.downloads}`,s.append(t),a.append(y),p.append(b),h.append(L),g.append(w),n.append(a,p,h,g),r.append(s),r.append(n),r})}function B(o,e){o.innerHTML="",o.append(...e)}function x(){return new R(".gallery a",{captions:!0,captionSelector:"img",captionType:"attr",captionsData:"alt",captionPosition:"bottom",captionDelay:250})}function i(o,e,r){P.show({class:"promise-message",iconUrl:"/goit-js-hw-12/cancel-circle.svg",iconColor:"whte",message:o,messageColor:"white",messageSize:"18",backgroundColor:r,position:e,class:"custom-toast",icon:"iziToast-icon"})}const f=document.querySelector(".search-form"),k=document.querySelector("#input-search"),C=document.querySelector("ul.gallery"),d=document.querySelector("#btn-load-more"),A=document.querySelector(".loadmore-after-searchform-container"),D=document.querySelector(".loadmore-after-btn-container");let l,m,c;f.addEventListener("submit",o=>{o.preventDefault(),m=k.value.trim(),m!==""&&(I(A),l=1,S(m,l).then(e=>{if(c=e.totalHits,c>=1){const r=q(e.hits);B(C,r),x().refresh();const t=document.querySelector(".gallery-item");if(t){const a=t.getBoundingClientRect().height*2;window.scrollBy({top:a,left:0,behavior:"smooth"})}console.log(t.getBoundingClientRect()),c-u>=1?d.style.display="block":i("We're sorry, but you've reached the end of search results.","bottomRight","blue")}else i("Sorry, there are no images matching your search query. Please try again!","topRight","red")}).catch(e=>{i("An error occurred while fetching the images. Please try again!","topRight","red"),console.log(e)}).finally(()=>{v(),f.reset()}))});d.addEventListener("click",o=>{o.preventDefault(),I(D),l++,S(m,l).then(e=>{if(c=e.totalHits-(l-1)*u,d.style.display="none",c>=1){const r=q(e.hits);C.append(...r),x().refresh();const t=document.querySelector(".gallery-item");t&&(t.getBoundingClientRect().height*2,window.scrollBy({top:500,left:0,behavior:"smooth"})),c-u>=1?setTimeout(()=>{d.style.display="block"},2e3):i("We're sorry, but you've reached the end of search results.","bottomRight","blue")}}).catch(e=>{i("An error occurred while fetching the images. Please try again!","topRight","red"),console.log(e)}).finally(()=>{v(),f.reset()})});
//# sourceMappingURL=commonHelpers.js.map
