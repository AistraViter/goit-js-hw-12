import{a as E,S as v,i as C}from"./assets/vendor-b11e2a50.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const k="44002741-2ff50451c0a1667e01f2d5f97",w=15;E.defaults.baseURL="https://pixabay.com/api/";async function I(s,e){return(await E.get("/",{params:{key:k,q:s,image_type:"photo",orientation:"horizontal",safesearch:"true",page:e,per_page:w}})).data}function x(s){return s.map(e=>{const n=document.createElement("li");n.classList.add("gallery-item");const a=document.createElement("a");a.classList.add("gallery-link"),a.href=e.largeImageURL;const t=document.createElement("img");t.classList.add("gallery-image"),t.src=e.webformatURL,t.dataset.source=e.largeImageURL,t.alt=e.tags;const o=document.createElement("ul");o.classList.add("image-caption");const c=document.createElement("li");c.classList.add("caption-item");const h=document.createElement("p");h.textContent=`Likes: 
${e.likes}`;const m=document.createElement("li");m.classList.add("caption-item");const f=document.createElement("p");f.textContent=`Views: 
${e.views}`;const p=document.createElement("li");p.classList.add("caption-item");const L=document.createElement("p");L.textContent=`Comments: 
${e.comments}`;const u=document.createElement("li");u.classList.add("caption-item");const b=document.createElement("p");return b.textContent=`Downloads: 
${e.downloads}`,a.append(t),c.append(h),m.append(f),p.append(L),u.append(b),o.append(c,m,p,u),n.append(a),n.append(o),n})}function S(s,e){s.innerHTML="",s.append(...e)}function P(){return new v(".gallery a",{captions:!0,captionSelector:"img",captionType:"attr",captionsData:"alt",captionPosition:"bottom",captionDelay:250})}function l(s){C.show({class:"promise-message",iconUrl:"/goit-js-hw-12/cancel-circle.svg",iconColor:"whte",message:s,messageColor:"white",messageSize:"18",backgroundColor:"red",position:"topRight",class:"custom-toast",icon:"iziToast-icon"})}const y=document.querySelector(".search-form"),D=document.querySelector("#input-search"),q=document.querySelector("ul.gallery"),g=document.querySelector("#btn-load-more");let i,O,d;const r=document.createElement("div");r.classList.add("loader");r.style.display="none";document.body.appendChild(r);y.addEventListener("submit",s=>{s.preventDefault();const e=D.value.trim();e!==""&&(r.style.display="block",i=1,I(e,i).then(n=>{if(d=n.totalHits,d>=1){const a=x(n.hits);console.log(a.length),S(q,a),P().refresh(),g.style.display="block"}else l("Sorry, there are no images matching your search query. Please try again!")}).catch(n=>{l("An error occurred while fetching the images. Please try again!"),console.log(n)}).finally(()=>{r.style.display="none",y.reset()}))});g.addEventListener("click",s=>{s.preventDefault(),r.style.display="block",i++,I(O,i).then(e=>{if(d=e.totalHits-(i-1)*w,d>=1){const n=x(e.hits);S(q,n),P().refresh(),g.style.display="block"}else l("Sorry, there are no images matching your search query. Please try again!")}).catch(e=>{l("An error occurred while fetching the images. Please try again!"),console.log(e)}).finally(()=>{r.style.display="none",y.reset()})});
//# sourceMappingURL=commonHelpers.js.map
